<!DOCTYPE html>
<html>





<head>
  <title>Quarkus - Sending emails using SMTP - main</title>
  <script id="adobe_dtm" src="https://www.redhat.com/dtm.js" type="text/javascript"></script>
  <script src="/assets/javascript/highlight.pack.js" type="text/javascript"></script>
  <META HTTP-EQUIV='X-XSS-Protection' CONTENT="1; mode=block">
  <META HTTP-EQUIV='X-Content-Type-Options' CONTENT="nosniff">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Quarkus: Supersonic Subatomic Java">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@QuarkusIO"> 
  <meta name="twitter:creator" content="@QuarkusIO">
  <meta property="og:url" content="https://quarkus.io/version/main/guides/mailer" />
  <meta property="og:title" content="Sending emails using SMTP - main" />
  <meta property="og:description" content="Quarkus: Supersonic Subatomic Java" />
  <meta property="og:image" content="https://quarkus.io/assets/images/quarkus_card.png" />
  
  <link rel="canonical" href="https://quarkus.io/guides/mailer">
  <link rel="shortcut icon" type="image/png" href="/favicon.ico" >
  <link rel="stylesheet" href="/guides/stylesheet/config.css" />
  <link rel="stylesheet" href="/assets/css/main.css" />
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css" integrity="sha384-lKuwvrZot6UHsBSfcMvOkWwlCMgc0TaWr+30HWe3a4ltaBwTZhyTEggF5tJv8tbt" crossorigin="anonymous">
  <link rel="alternate" type="application/rss+xml"  href="/feed.xml" title="Quarkus">
  <script src="/assets/javascript/goan.js" type="text/javascript"></script>
  <script src="/assets/javascript/hl.js" type="text/javascript"></script>
</head>

<body class="guides">
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NJWS5L"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->

  <div class="nav-wrapper">
  <div class="grid-wrapper">
    <div class="width-12-12">
      <input type="checkbox" id="checkbox" />
      <nav id="main-nav" class="main-nav">
  <div class="container">
    <div class="logo-wrapper">
      
        <a href="/"><img src="/assets/images/quarkus_logo_horizontal_rgb_600px_reverse.png" class="project-logo" title="Quarkus"></a>
      
    </div>
    <label class="nav-toggle" for="checkbox">
      <i class="fa fa-bars"></i>
    </label>
    <div id="menu" class="menu">
      <span>
        <a href="/get-started/" class="">はじめに</a>
      </span>
      <span>
        <a href="/guides/" class="active">ガイド</a>
      </span>
      <span>
        <a href="/community/" class="">コミュニティ</a>
      </span>
      <span>
        <a href="/support/" class="">サポート</a>
      </span>
      <span>
        <a href="/blog/" class="">ブログ</a>
      </span>
      <span>
        <a href="https://code.quarkus.io" class="button-cta secondary white">コーディングを開始</a>
      </span>
    </div>
  </div>
      </nav>
    </div>
  </div>
</div>

  <div class="content">
    


<div class="grid-wrapper guide">
  <div class="grid__item width-9-12 width-12-12-mobile">
    <h1 class="text-caps">Sending emails using SMTP </h1>
  </div>
  <div class="grid__item width-3-12 align-self-center text-right hide-mobile">
    <label id="guide-version-label">Select Guide Version</label>
    <select id="guide-version-dropdown">
      
        
        
        
        
          <option value="main" selected>Main - SNAPSHOT</option>
        
      
        
        
        
        
          <option value="latest" >2.0 - Latest</option>
        
      
        
        
        
        
          <option value="1.11" >1.11</option>
        
      
        
        
        
        
          <option value="1.7" >1.7</option>
        
      
    </select>
  </div>
  <div class="width-12-12">
    <div class="hide-mobile toc"><ul class="sectlevel1">
<li><a href="#前提条件">前提条件</a></li>
<li><a href="#アーキテクチャ">アーキテクチャ</a></li>
<li><a href="#ソリューション">ソリューション</a></li>
<li><a href="#creating-the-maven-project">Creating the Maven Project</a>
<ul class="sectlevel2">
<li><a href="#implement-the-http-endpoint">Implement the HTTP endpoint</a></li>
</ul>
</li>
<li><a href="#using-the-reactive-mailer">Using the reactive mailer</a></li>
<li><a href="#メーラーの設定">メーラーの設定</a></li>
<li><a href="#まとめ">まとめ</a></li>
</ul></div>
    <div>
      <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This guide demonstrates how your Quarkus application can send emails using
an SMTP server.  This is a getting started guide.  Check the
<a href="mailer-reference">Quarkus Mailer Reference documentation</a> for more
complete explanation about the mailer and its usage.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="前提条件"><a class="anchor" href="#前提条件"></a>前提条件</h2>
<div class="sectionbody">
<div class="paragraph">
<p>このガイドを完成させるには、以下が必要です:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>less than 15 minutes,</p>
</li>
<li>
<p>The SMTP hostname, port and credentials, and an email address,</p>
</li>
<li>
<p>an IDE,</p>
</li>
<li>
<p>cURL,</p>
</li>
<li>
<p>JDK 11+ installed with <code>JAVA_HOME</code> configured appropriately,</p>
</li>
<li>
<p>Apache Maven 3.6.2+,</p>
</li>
<li>
<p>ネイティブモードで実行する場合は、GraalVM がインストールされていること</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="アーキテクチャ"><a class="anchor" href="#アーキテクチャ"></a>アーキテクチャ</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this guide, we will build an application:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>exposing an HTTP endpoint,</p>
</li>
<li>
<p>sending email when the endpoint receives an HTTP request.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The application will demonstrate how to send emails using the <em>imperative</em>
and <em>reactive</em> mailer APIs.</p>
</div>
<div class="paragraph">
<p>Attachments, inlined attachments, templating, testing and more advanced
configuration are covered in the <a href="mailer-reference">Mailer Reference
documentation</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="ソリューション"><a class="anchor" href="#ソリューション"></a>ソリューション</h2>
<div class="sectionbody">
<div class="paragraph">
<p>次の章で紹介する手順に沿って、ステップを踏んでアプリを作成することをお勧めします。ただし、完成した例にそのまま進んでも構いません。</p>
</div>
<div class="paragraph">
<p>Gitレポジトリをクローンするか <code>git clone <a href="https://github.com/quarkusio/quarkus-quickstarts.git" class="bare">https://github.com/quarkusio/quarkus-quickstarts.git</a></code> 、
<a href="https://github.com/quarkusio/quarkus-quickstarts/archive/main.zip">アーカイブ</a> をダウンロードします。</p>
</div>
<div class="paragraph">
<p>The solution is located in the <code>mailer-quickstart</code>
<a href="https://github.com/quarkusio/quarkus-quickstarts/tree/main/mailer-quickstart">directory</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="creating-the-maven-project"><a class="anchor" href="#creating-the-maven-project"></a>Creating the Maven Project</h2>
<div class="sectionbody">
<div class="paragraph">
<p>First, we need a project.  Open your browser to <a href="https://code.quarkus.io" class="bare">https://code.quarkus.io</a> and
select the following extensions:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Resteasy Reactive - we use it to expose our HTTP endpoint</p>
</li>
<li>
<p>Mailer - which offer the possibility to send emails</p>
</li>
<li>
<p>Qute - the Quarkus template engine</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Alternatively, this
<a href="https://code.quarkus.io/?a=quarkus-mailer-getting-started&amp;nc=true&amp;e=resteasy-reactive&amp;e=qute&amp;e=mailer&amp;extension-search=mail">link</a>
pre-configures the application.  Click on "Generate your application",
download the zip file and unzip it on your file system.  Open the generated
project in your IDE.  In a terminal, navigate to the project and run <code>mvn
quarkus:dev</code>.</p>
</div>
<div class="sect2">
<h3 id="implement-the-http-endpoint"><a class="anchor" href="#implement-the-http-endpoint"></a>Implement the HTTP endpoint</h3>
<div class="paragraph">
<p>First, create the <code>src/main/java/org/acme/MailResource.java</code> file, with the
following content:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package org.acme;

import io.quarkus.mailer.Mail;
import io.quarkus.mailer.Mailer;
import io.smallrye.common.annotation.Blocking;

import javax.inject.Inject;
import javax.ws.rs.GET;
import javax.ws.rs.Path;

@Path("/mail")                                                          <i class="conum" data-value="1"></i><b>(1)</b>
public class MailResource {

    @Inject Mailer mailer;                                              <i class="conum" data-value="2"></i><b>(2)</b>

    @GET                                                                <i class="conum" data-value="3"></i><b>(3)</b>
    @Blocking                                                           <i class="conum" data-value="4"></i><b>(4)</b>
    public void sendEmail() {
        mailer.send(
                Mail.withText("quarkus@quarkus.io",                     <i class="conum" data-value="5"></i><b>(5)</b>
                    "Ahoy from Quarkus",
                    "A simple email sent from a Quarkus application."
                )
        );
    }

}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Configure the root path of our HTTP endpoint</p>
</li>
<li>
<p>Inject the <code>Mailer</code> object managed by Quarkus</p>
</li>
<li>
<p>Create a method that will handle the HTTP GET request on <code>/mail</code></p>
</li>
<li>
<p>Because we are using RESTEasy Reactive and the <em>imperative</em> mailer, we need
to add the <code>@Blocking</code> annotation. We will see later the reactive variant.</p>
</li>
<li>
<p>Create a <code>Mail</code> object by configuring the <em>to</em> recipient, the subject and
body</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The <code>MailResource</code> class implements the HTTP API exposed by our
application.  It handles <code>GET</code> request on `http://localhost:8080/mail.</p>
</div>
<div class="paragraph">
<p>So, if in another terminal, you run:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">&gt; curl http://localhost:8080/mail</code></pre>
</div>
</div>
<div class="paragraph">
<p>You should see in the application log something like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">INFO  [quarkus-mailer] (executor-thread-0) Sending email Ahoy from Quarkus from null to [quarkus@quarkus.io], text body:
A simple email sent from a Quarkus application.
html body:
&lt;empty&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>As the application runs in <em>dev mode</em>, it simulates the sending of the
emails.  It prints it in the log, so you can check that what was about to be
sent.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This section used the <em>imperative</em> mailer API.  It blocks the caller thread
until the mail is sent.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="using-the-reactive-mailer"><a class="anchor" href="#using-the-reactive-mailer"></a>Using the reactive mailer</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The last section use the <em>imperative</em> mailer.  Quarkus also offers a
reactive API.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="title">Mutiny</div>
<div class="paragraph">
<p>The reactive mailer uses Mutiny reactive types.  If you are not familiar
with Mutiny, check <a href="mutiny-primer">Mutiny - an intuitive reactive
programming library</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In the same class, add:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Inject
ReactiveMailer reactiveMailer;                          <i class="conum" data-value="1"></i><b>(1)</b>

@GET
@Path("/reactive")                                      <i class="conum" data-value="2"></i><b>(2)</b>
public Uni&lt;Void&gt; sendEmailUsingReactiveMailer() {       <i class="conum" data-value="3"></i><b>(3)</b>
    return reactiveMailer.send(                         <i class="conum" data-value="4"></i><b>(4)</b>
                Mail.withText("quarkus@quarkus.io",
                    "Ahoy from Quarkus",
                    "A simple email sent from a Quarkus application using the reactive API."
                )
        );
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Inject the reactive mailer. The class to import is
<code>io.quarkus.mailer.reactive.ReactiveMailer</code>.</p>
</li>
<li>
<p>Configure the path to handle GET request on <code>/mail/reactive</code>. Note that
because we are using the reactive API, we don&#8217;t need <code>@Blocking</code></p>
</li>
<li>
<p>The method returns a <code>Uni&lt;Void&gt;</code> which completes when the mail is sent. It
does not block the caller thread.</p>
</li>
<li>
<p>The API is similar to the <em>imperative</em> one except that the <code>send</code> method
returns a <code>Uni&lt;Void&gt;</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Now, in your terminal, run</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">&gt; curl http://localhost:8080/mail/reactive</code></pre>
</div>
</div>
<div class="paragraph">
<p>You should see in the application log something like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">INFO  [quarkus-mailer] (vert.x-eventloop-thread-11) Sending email Ahoy from Quarkus from null to [quarkus@quarkus.io], text body:
A simple email sent from a Quarkus application using the reactive API.
html body:
&lt;empty&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="メーラーの設定"><a class="anchor" href="#メーラーの設定"></a>メーラーの設定</h2>
<div class="sectionbody">
<div class="paragraph">
<p>It&#8217;s time to configure the mailer to not simulate the sending of the
emails.  The Quarkus mailer is using SMTP, so make sure you have access to a
SMTP server.</p>
</div>
<div class="paragraph">
<p>In the <code>src/main/resources/application.properties</code> file, you need to
configure the host, port, username, password as well as the other
configuration aspect.  Note that the password can also be configured using
system properties and environment variables.  See the
<a href="configuration-reference">configuration reference guide</a> for
details.</p>
</div>
<div class="paragraph">
<p>ここでは <em>sendgridを</em> 使用した例を示します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties"># Your email address you send from - must match the "from" address from sendgrid.
quarkus.mailer.from=test@quarkus.io

# The SMTP host
quarkus.mailer.host=smtp.sendgrid.net
# The SMTP port
quarkus.mailer.port=465
# If the SMTP connection requires SSL/TLS
quarkus.mailer.ssl=true
# Your username
quarkus.mailer.username=....
# Your password
quarkus.mailer.password=....

# By default, in dev mode, the mailer is a mock. This disables the mock and use the configured mailer.
quarkus.mailer.mock=false</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once you have configured the mailer, if you call the HTTP endpoint as shown
above, you will send emails.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="まとめ"><a class="anchor" href="#まとめ"></a>まとめ</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This guide has shown how to send emails from your Quarkus application.  The
<a href="mailer-reference">mailer reference guide</a> provides more details
about the mailer usage and configuration such as:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="mailer-reference#attachments">how to add attachments</a></p>
</li>
<li>
<p><a href="mailer-reference#html">how to format the email as HTML and use
inline attachments</a></p>
</li>
<li>
<p><a href="mailer-reference#templates">how to use Qute templates</a></p>
</li>
<li>
<p><a href="mailer-reference#testing">how to test applications sending emails</a></p>
</li>
<li>
<p><a href="mailer-reference#gmail-specific-configuration">how to configure the
mailer to send emails with GMAIL</a></p>
</li>
</ul>
</div>
</div>
</div>
    </div>
  </div>
</div>

  </div>

  <div class="content project-footer">
  <div class="footer-section">
    <div class="logo-wrapper">
      <a href="/"><img src="/assets/images/quarkus_logo_horizontal_rgb_reverse.svg" class="project-logo" title="Quarkus"></a>
    </div>
  </div>
  <div class="grid-wrapper">
    <p class="grid__item width-3-12">Quarkus はオープンです。このプロジェクトの全ての依存関係は<a href='https://www.apache.org/licenses/LICENSE-2.0' target='_blank'>Apache Software License 2.0</a>または互換性のあるライセンスの元で利用出来ます。<br /><br />このウェブサイトは <a href='https://jekyllrb.com/' target='_blank'>Jekyll</a> で構築されており、<a href='https://pages.github.com/' target='_blank'>Github Pages</a>にホストされており、完全にオープンソースです。改善したい場合、 <a href='https://github.com/quarkusio/quarkusio.github.io' target='_blank'>ウェブサイトをフォークし</a>、修正してみせてください。</p>

    
      <div class="width-1-12 project-links">
        <span>ナビゲーション</span>
        <ul class="footer-links">
          
            <li><a href="/">ホーム</a></li>
          
            <li><a href="/guides">ガイド</a></li>
          
            <li><a href="/community/#contributing">貢献</a></li>
          
            <li><a href="/faq">FAQ</a></li>
          
            <li><a href="/get-started">はじめに</a></li>
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <span>貢献</span>
        <ul class="footer-links">
          
            <li><a href="https://twitter.com/quarkusio">フォロー</a></li>
          
            <li><a href="https://github.com/quarkusio">GitHub</a></li>
          
            <li><a href="/security">セキュリティポリシー</a></li>
          
        </ul>
      </div>
    
      <div class="width-2-12 project-links">
        <span>サポート</span>
        <ul class="footer-links">
          
            <li><a href="https://stackoverflow.com/questions/tagged/quarkus">Stack Overflow</a></li>
          
            <li><a href="https://quarkusio.zulipchat.com">チャットルーム</a></li>
          
            <li><a href="https://groups.google.com/forum/#!forum/quarkus-dev">フォーラム</a></li>
          
        </ul>
      </div>
    

    
      <div class="width-4-12 more-links">
        <span>Quarkusはコミュニティプロジェクトで構成されています：</span>
        <ul class="footer-links">
          
            <li><a href="https://vertx.io/" target="_blank">Eclipse Vert.x</a></li>
          
            <li><a href="https://smallrye.io" target="_blank">SmallRye</a></li>
          
            <li><a href="https://hibernate.org" target="_blank">Hibernate</a></li>
          
            <li><a href="https://netty.io" target="_blank">Netty</a></li>
          
            <li><a href="https://resteasy.github.io" target="_blank">RESTEasy</a></li>
          
            <li><a href="https://camel.apache.org" target="_blank">Apache Camel</a></li>
          
            <li><a href="https://microprofile.io" target="_blank">Eclipse MicroProfile</a></li>
          
            <li><a href="https://code.quarkus.io/" target="_blank">等々...</a></li>
          
        </ul>
      </div>
    
  </div>
</div>

  <div class="content redhat-footer">
  <div class="grid-wrapper">
    <span class="licence">
      <i class="fab fa-creative-commons"></i><i class="fab fa-creative-commons-by"></i> <a href="https://creativecommons.org/licenses/by/3.0/" target="_blank">CC by 3.0</a> | <a href="https://www.redhat.com/en/about/privacy-policy">Privacy Policy</a>
    </span>
    <span class="redhat">
      Sponsored by
    </span>
    <span class="redhat-logo">
      <a href="https://www.redhat.com/" target="_blank"><img src="/assets/images/redhat_reversed.svg"></a>
    </span>
  </div>
</div>


  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js" integrity="sha384-8gBf6Y4YYq7Jx97PIqmTwLPin4hxIzQw5aDmUg/DDhul9fFpbbLcLh3nTIIDJKhx" crossorigin="anonymous"></script>
  <script type="text/javascript" src="/assets/javascript/mobile-nav.js"></script>
  <script type="text/javascript" src="/assets/javascript/scroll-down.js"></script>
  <script src="/assets/javascript/satellite.js" type="text/javascript"></script>
  <script src="/guides/javascript/config.js" type="text/javascript"></script>
  <script src="/assets/javascript/search-filter.js" type="text/javascript"></script>
  <script src="/assets/javascript/guides-version-dropdown.js" type="text/javascript"></script>
  <script src="/assets/javascript/back-to-top.js" type="text/javascript"></script>
</body>

</html>
