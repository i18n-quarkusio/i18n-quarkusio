<!DOCTYPE html>
<html>





<head>
  <title>Quarkus - 設定をオブジェクトにマッピング</title>
  <script id="adobe_dtm" src="https://www.redhat.com/dtm.js" type="text/javascript"></script>
  <script src="/assets/javascript/highlight.pack.js" type="text/javascript"></script>
  <META HTTP-EQUIV='X-XSS-Protection' CONTENT="1; mode=block">
  <META HTTP-EQUIV='X-Content-Type-Options' CONTENT="nosniff">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Quarkus: Supersonic Subatomic Java">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@QuarkusIO"> 
  <meta name="twitter:creator" content="@QuarkusIO">
  <meta property="og:url" content="https://quarkus.io/guides/config-mappings" />
  <meta property="og:title" content="設定をオブジェクトにマッピング" />
  <meta property="og:description" content="Quarkus: Supersonic Subatomic Java" />
  <meta property="og:image" content="https://quarkus.io/assets/images/quarkus_card.png" />
  
  <link rel="canonical" href="https://quarkus.io/guides/config-mappings">
  <link rel="shortcut icon" type="image/png" href="/favicon.ico" >
  <link rel="stylesheet" href="/guides/stylesheet/config.css" />
  <link rel="stylesheet" href="/assets/css/main.css" />
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css" integrity="sha384-lKuwvrZot6UHsBSfcMvOkWwlCMgc0TaWr+30HWe3a4ltaBwTZhyTEggF5tJv8tbt" crossorigin="anonymous">
  <link rel="alternate" type="application/rss+xml"  href="/feed.xml" title="Quarkus">
  <script src="/assets/javascript/goan.js" type="text/javascript"></script>
  <script src="/assets/javascript/hl.js" type="text/javascript"></script>
</head>

<body class="guides">
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NJWS5L"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->

  <div class="nav-wrapper">
  <div class="grid-wrapper">
    <div class="width-12-12">
      <input type="checkbox" id="checkbox" />
      <nav id="main-nav" class="main-nav">
  <div class="container">
    <div class="logo-wrapper">
      
        <a href="/"><img src="/assets/images/quarkus_logo_horizontal_rgb_600px_reverse.png" class="project-logo" title="Quarkus"></a>
      
    </div>
    <label class="nav-toggle" for="checkbox">
      <i class="fa fa-bars"></i>
    </label>
    <div id="menu" class="menu">
      <span>
        <a href="/get-started/" class="">はじめに</a>
      </span>
      <span>
        <a href="/guides/" class="active">ガイド</a>
      </span>
      <span>
        <a href="/community/" class="">コミュニティ</a>
      </span>
      <span>
        <a href="/support/" class="">サポート</a>
      </span>
      <span>
        <a href="/blog/" class="">ブログ</a>
      </span>
      <span>
        <a href="https://code.quarkus.io" class="button-cta secondary white">コーディングを開始</a>
      </span>
    </div>
  </div>
      </nav>
    </div>
  </div>
</div>

  <div class="content">
    


<div class="grid-wrapper guide">
  <div class="grid__item width-9-12 width-12-12-mobile">
    <h1 class="text-caps">設定をオブジェクトにマッピング </h1>
  </div>
  <div class="grid__item width-3-12 align-self-center text-right hide-mobile">
    <label id="guide-version-label">Select Guide Version</label>
    <select id="guide-version-dropdown">
      
        
        
        
        
          <option value="main" >Main - SNAPSHOT</option>
        
      
        
        
        
        
          <option value="latest" selected>2.0 - Latest</option>
        
      
        
        
        
        
      
        
        
        
        
      
    </select>
  </div>
  <div class="width-12-12">
    <div class="hide-mobile toc"><ul class="sectlevel1">
<li><a href="#config-mappings">1. <code>@ConfigMapping</code></a>
<ul class="sectlevel2">
<li><a href="#取得">1.1. 取得</a></li>
<li><a href="#ネストされたグループ">1.2. ネストされたグループ</a></li>
<li><a href="#プロパティ名のオーバーライド">1.3. プロパティ名のオーバーライド</a></li>
<li><a href="#conversions">1.4. Conversions</a></li>
<li><a href="#デフォルト">1.5. デフォルト</a></li>
<li><a href="#バリデーション">1.6. バリデーション</a></li>
</ul>
</li>
<li><a href="#config-properties">2. <span class="line-through"><code>@ConfigProperties</code></span> (Deprecated)</a>
<ul class="sectlevel2">
<li><a href="#configproperties-に関する追加の注意事項">2.1. @ConfigProperties に関する追加の注意事項</a></li>
<li><a href="#同じ-configproperties-で異なる接頭辞を使用">2.2. 同じ ConfigProperties で異なる接頭辞を使用</a></li>
<li><a href="#configpropertiesとビルド時条件の組み合わせ">2.3. ConfigPropertiesとビルド時条件の組み合わせ</a></li>
</ul>
</li>
</ul></div>
    <div>
      <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>設定マッピングでは、同じプレフィックスを持つ複数の設定プロパティを1つのインターフェースにまとめることができます。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="config-mappings"><a class="anchor" href="#config-mappings"></a>1. <code>@ConfigMapping</code></h2>
<div class="sectionbody">
<div class="paragraph">
<p>設定マッピングでは、最小メタデータ設定で、 <code>@io.smallrye.config.ConfigMapping</code>
のアノテーションが付いたインターフェースが必要です。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@ConfigMapping(prefix = "server")
interface Server {
    String host();

    int port();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>Server</code> インターフェースは、 <code>server.host</code> という名前の設定プロパティを <code>Server.host()</code> メソッドに、
<code>server.port</code> を <code>Server.port()</code> メソッドにマッピングすることができます。検索する設定プロパティ名は、プレフィックスと、
<code>.</code> (ドット)をセパレータとするメソッド名から構築されます。</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
マッピングが設定プロパティと一致しない場合、マッピングされた要素が <code>Optional</code> でない限り、 <code>NoSuchElementException</code>
がスローされます。
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="取得"><a class="anchor" href="#取得"></a>1.1. 取得</h3>
<div class="paragraph">
<p>設定マッピングインタフェースは，任意のCDI対応Beanに注入することができます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">class BusinessBean {
    @Inject
    Server server;

    public void businessMethod() {
        String host = server.host();
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>CDI以外のコンテキストでは、API <code>io.smallrye.config.SmallRyeConfig#getConfigMapping</code>
を使用して、設定マッピングインスタンスを取得します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">SmallRyeConfig config = ConfigProvider.getConfig().unwrap(SmallRyeConfig.class);
Server server = config.getConfigMapping(Server.class);</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="ネストされたグループ"><a class="anchor" href="#ネストされたグループ"></a>1.2. ネストされたグループ</h3>
<div class="paragraph">
<p>ネストされたマッピングは、他の設定プロパティをサブグループ化する方法を提供します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@ConfigMapping(prefix = "server")
public interface Server {
    String host();

    int port();

    Log log();

    interface Log {
        boolean enabled();

        String suffix();

        boolean rotate();
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">application.properties</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">server.host=localhost
server.port=8080
server.log.enabled=true
server.log.suffix=.log
server.log.rotate=false</code></pre>
</div>
</div>
<div class="paragraph">
<p>マッピンググループのメソッド名は、設定プロパティのサブネームスペースとして機能します。</p>
</div>
</div>
<div class="sect2">
<h3 id="プロパティ名のオーバーライド"><a class="anchor" href="#プロパティ名のオーバーライド"></a>1.3. プロパティ名のオーバーライド</h3>
<div class="sect3">
<h4 id="withname"><a class="anchor" href="#withname"></a>1.3.1. <code>@WithName</code></h4>
<div class="paragraph">
<p>メソッド名やプロパティ名が互いに一致しない場合、 <code>@WithName</code>
アノテーションはメソッド名のマッピングを上書きし、アノテーションで提供された名前を使用することができます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@ConfigMapping(prefix = "server")
interface Server {
    @WithName("name")
    String host();

    int port();
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">application.properties</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">server.name=localhost
server.port=8080</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="withparentname"><a class="anchor" href="#withparentname"></a>1.3.2. <code>@WithParentName</code></h4>
<div class="paragraph">
<p>The <code>@WithParent</code> annotation allows to configurations mapping to inherit its
container name, simplifying the configuration property name required to
match the mapping:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">interface Server {
    @WithParentName
    ServerHostAndPort hostAndPort();

    @WithParentName
    ServerInfo info();
}

interface ServerHostAndPort {
    String host();

    int port();
}

interface ServerInfo {
    String name();
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">application.properties</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">server.host=localhost
server.port=8080
server.name=konoha</code></pre>
</div>
</div>
<div class="paragraph">
<p>Without the <code>@WithParentName</code> the method <code>name()</code> requires the configuration
property <code>server.info.name</code>. Because we use <code>@WithParentName</code>, the <code>info()</code>
mapping will inherit the parent name from <code>Server</code> and <code>name()</code> maps to
<code>server.name</code> instead.</p>
</div>
</div>
<div class="sect3">
<h4 id="ネーミング戦略"><a class="anchor" href="#ネーミング戦略"></a>1.3.3. ネーミング戦略</h4>
<div class="paragraph">
<p>キャメルケースのメソッド名は、ケバブケースのプロパティ名にマッピングされます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@ConfigMapping(prefix = "server")
interface Server {
    String theHost();

    int thePort();
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">application.properties</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">server.the-host=localhost
server.the-port=8080</code></pre>
</div>
</div>
<div class="paragraph">
<p>The mapping strategy can be adjusted by setting <code>namingStrategy</code> value in
the <code>@ConfigMapping</code> annotation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@ConfigMapping(prefix = "server", namingStrategy = ConfigMapping.NamingStrategy.VERBATIM)
public interface ServerVerbatimNamingStrategy {
    String theHost();

    int thePort();
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">application.properties</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">server.theHost=localhost
server.thePort=8080</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>@ConfigMapping</code> annotation support the following naming stategies:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>KEBAB_CASE</code> (default) - The method name is derived by replacing case
changes with a dash to map the configuration property.</p>
</li>
<li>
<p><code>VERBATIM</code> - The method name is used as is to map the configuration
property.</p>
</li>
<li>
<p><code>SNAKE_CASE</code> - The method name is derived by replacing case changes with an
underscore to map the configuration property.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="conversions"><a class="anchor" href="#conversions"></a>1.4. Conversions</h3>
<div class="paragraph">
<p>A config mapping class support automatic conversions of all types available
for conversion in <code>Config</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@ConfigMapping
public interface SomeTypes {
    @WithName("int")
    int intPrimitive();

    @WithName("int")
    Integer intWrapper();

    @WithName("long")
    long longPrimitive();

    @WithName("long")
    Long longWrapper();

    @WithName("float")
    float floatPrimitive();

    @WithName("float")
    Float floatWrapper();

    @WithName("double")
    double doublePrimitive();

    @WithName("double")
    Double doubleWrapper();

    @WithName("char")
    char charPrimitive();

    @WithName("char")
    Character charWrapper();

    @WithName("boolean")
    boolean booleanPrimitive();

    @WithName("boolean")
    Boolean booleanWrapper();
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">application.properties</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">int=9
long=9999999999
float=99.9
double=99.99
char=c
boolean=true</code></pre>
</div>
</div>
<div class="paragraph">
<p>This is also valid for <code>Optional</code> and friends:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@ConfigMapping
public interface Optionals {
    Optional&lt;Server&gt; server();

    Optional&lt;String&gt; optional();

    @WithName("optional.int")
    OptionalInt optionalInt();

    interface Server {
        String host();

        int port();
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this case, the mapping won&#8217;t fail if there are not configuration
properties to match the mapping.</p>
</div>
<div class="sect3">
<h4 id="withconverter"><a class="anchor" href="#withconverter"></a>1.4.1. <code>@WithConverter</code></h4>
<div class="paragraph">
<p>The <code>@WithConverter</code> annotation provides a way to set a <code>Converter</code> to use
in a specific mapping:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@ConfigMapping
public interface Converters {
    @WithConverter(FooBarConverter.class)
    String foo();
}

public static class FooBarConverter implements Converter&lt;String&gt; {
    @Override
    public String convert(final String value) {
        return "bar";
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">application.properties</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">foo=foo</code></pre>
</div>
</div>
<div class="paragraph">
<p>A call to <code>Converters.foo()</code> results in the value <code>bar</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="コレクション"><a class="anchor" href="#コレクション"></a>1.4.2. コレクション</h4>
<div class="paragraph">
<p>A config mapping is also able to map collections types <code>List</code> and <code>Set</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@ConfigMapping(prefix = "server")
public interface ServerCollections {
    Set&lt;Environment&gt; environments();

    interface Environment {
        String name();

        List&lt;App&gt; apps();

        interface App {
            String name();

            List&lt;String&gt; services();

            Optional&lt;List&lt;String&gt;&gt; databases();
        }
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">application.properties</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">server.environments[0].name=dev
server.environments[0].apps[0].name=rest
server.environments[0].apps[0].services=bookstore,registration
server.environments[0].apps[0].databases=pg,h2
server.environments[0].apps[1].name=batch
server.environments[0].apps[1].services=stock,warehouse</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>List</code> or <code>Set</code> mappings can use
<a href="config-reference#indexed-properties">indexed properties</a> to map
configuration values in mapping groups. For collection with simple element
types like <code>String</code>, their configuration value is a comma separated string.</p>
</div>
</div>
<div class="sect3">
<h4 id="マップ"><a class="anchor" href="#マップ"></a>1.4.3. マップ</h4>
<div class="paragraph">
<p>A config mapping is also able to map a <code>Map</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@ConfigMapping(prefix = "server")
public interface Server {
    String host();

    int port();

    Map&lt;String, String&gt; form();
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">application.properties</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">server.host=localhost
server.port=8080
server.form.login-page=login.html
server.form.error-page=error.html
server.form.landing-page=index.html</code></pre>
</div>
</div>
<div class="paragraph">
<p>The configuration property needs to specify an additional name to act as the
key. In this case the <code>form()</code> <code>Map</code> will contain three elements with the
keys <code>login-page</code>, <code>error-page</code> and <code>landing-page</code>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="デフォルト"><a class="anchor" href="#デフォルト"></a>1.5. デフォルト</h3>
<div class="paragraph">
<p>The <code>@WithDefault</code> annotation allows to set a default property into a
mapping (and prevent and error if the configuration value is not available
in any <code>ConfigSource</code>):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public interface Defaults {
    @WithDefault("foo")
    String foo();

    @WithDefault("bar")
    String bar();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>設定プロパティは必要ありません。 <code>Defaults.foo()</code> は値 <code>foo</code> を、 <code>Defaults.bar()</code> は値 <code>bar</code>
を返します。</p>
</div>
</div>
<div class="sect2">
<h3 id="バリデーション"><a class="anchor" href="#バリデーション"></a>1.6. バリデーション</h3>
<div class="paragraph">
<p>設定マッピングは、設定値を検証するために <a href="https://beanvalidation.org">Bean
Validation</a>からのアノテーションを組み合わせることができます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@ConfigMapping(prefix = "server")
interface Server {
    @Size(min = 2, max = 20)
    String host();

    @Max(10000)
    int port();
}</code></pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
検証が機能するためには、 <code>quarkus-hibernate-validator</code> のエクステンションが必要です。
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="config-properties"><a class="anchor" href="#config-properties"></a>2. <span class="line-through"><code>@ConfigProperties</code></span> (Deprecated)</h2>
<div class="sectionbody">
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
この機能はまもなく削除される予定です。コードベースを更新し、代わりに <code>@ConfigMapping</code> を使用してください。
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><code>@io.quarkus.arc.config.ConfigProperties</code>
アノテーションは、複数の関連する設定値を独自のクラスにまとめることができます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package org.acme.config;

import io.quarkus.arc.config.ConfigProperties;
import java.util.Optional;

@ConfigProperties(prefix = "greeting") <i class="conum" data-value="1"></i><b>(1)</b>
public class GreetingConfiguration {

    private String message;
    private String suffix = "!"; <i class="conum" data-value="2"></i><b>(2)</b>
    private Optional&lt;String&gt; name;

    public String getMessage() {
        return message;
    }

    public void setMessage(String message) {
        this.message = message;
    }

    public String getSuffix() {
        return suffix;
    }

    public void setSuffix(String suffix) {
        this.suffix = suffix;
    }

    public Optional&lt;String&gt; getName() {
        return name;
    }

    public void setName(Optional&lt;String&gt; name) {
        this.name = name;
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>prefix</code> は任意です。設定していない場合は、使用される接頭辞はクラス名によって決まります。この場合も (<code>Configuration</code>
の接尾辞は削除されているため) <code>greeting</code> となります。クラス名が <code>GreetingExtraConfiguration</code>
の場合は、デフォルトの接頭辞が <code>greeting-extra</code> となります。</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>!</code> は、<code>greeting.suffix</code> が設定されていない場合のデフォルト値になります。</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Inject the <code>GreetingResource</code> with CDI <code>@Inject</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Inject
GreetingConfiguration greetingConfiguration;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Another alternative style provided by Quarkus is to create
<code>GreetingConfiguration</code> as an interface:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package org.acme.config;

import io.quarkus.arc.config.ConfigProperties;
import org.eclipse.microprofile.config.inject.ConfigProperty;
import java.util.Optional;

@ConfigProperties(prefix = "greeting")
public interface GreetingConfiguration {

    @ConfigProperty(name = "message") <i class="conum" data-value="1"></i><b>(1)</b>
    String message();

    @ConfigProperty(defaultValue = "!")
    String getSuffix(); <i class="conum" data-value="2"></i><b>(2)</b>

    Optional&lt;String&gt; getName(); <i class="conum" data-value="3"></i><b>(3)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>@ConfigProperty</code>
アノテーションが必要なのは、メソッドが対応する設定プロパティの名前が、ゲッターメソッドの命名規則に従っていないからです。</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>In this case since <code>name</code> is not set, the corresponding property will be
<code>greeting.suffix</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>It is unnecessary to specify the <code>@ConfigProperty</code> annotation because the
method name follows the getter method naming conventions (<code>greeting.name</code>
being the corresponding property) and no default value is required.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>When using <code>@ConfigProperties</code> on a class or an interface, if the value of
one of its fields is not provided, the application startup will fail, and a
<code>javax.enterprise.inject.spi.DeploymentException</code> will be thrown. This does
not apply to <code>Optional</code> fields and fields with a default value.</p>
</div>
<div class="sect2">
<h3 id="configproperties-に関する追加の注意事項"><a class="anchor" href="#configproperties-に関する追加の注意事項"></a>2.1. @ConfigProperties に関する追加の注意事項</h3>
<div class="paragraph">
<p><code>@ConfigProperties</code> でアノテーションされた通常のクラスを使用する場合、クラスは必ずしも getter および setter
を宣言する必要はありません。単純でパブリックな確定的でないフィールドを持つことも有効です。</p>
</div>
<div class="paragraph">
<p>Furthermore, the configuration classes support nested object
configuration. Suppose there was a need to have an extra layer of greeting
configuration named <code>content</code> that would contain a few fields:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@ConfigProperties(prefix = "greeting")
public class GreetingConfiguration {

    public String message;
    public String suffix = "!";
    public Optional&lt;String&gt; name;
    public ContentConfig content; <i class="conum" data-value="1"></i><b>(1)</b>

    public static class ContentConfig {
        public Integer prizeAmount;
        public List&lt;String&gt; recipients;
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>フィールドの名前 (クラス名ではありません) は、オブジェクトにバインドされるプロパティーの名前を決定します。</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>プロパティの設定は通常の方法で行います。</p>
</div>
<div class="listingblock">
<div class="title">application.properties</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">greeting.message = hello
greeting.name = quarkus
greeting.content.prize-amount=10
greeting.content.recipients=Jane,John</code></pre>
</div>
</div>
<div class="paragraph">
<p>さらに、 <code>@ConfigProperties</code> でアノテーションされたクラスには、Bean Validationアノテーションを付けることができます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@ConfigProperties(prefix = "greeting")
public class GreetingConfiguration {

    @Size(min = 20)
    public String message;
    public String suffix = "!";

}</code></pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
検証が機能するためには、 <code>quarkus-hibernate-validator</code> のエクステンションが必要です。
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="同じ-configproperties-で異なる接頭辞を使用"><a class="anchor" href="#同じ-configproperties-で異なる接頭辞を使用"></a>2.2. 同じ ConfigProperties で異なる接頭辞を使用</h3>
<div class="paragraph">
<p>Quarkus also supports the use of the same <code>@ConfigProperties</code> object with
different prefixes for each injection point using the
<code>io.quarkus.arc.config.@ConfigPrefix</code> annotation. If <code>GreetingConfiguration</code>
from above needs to be used for both the <code>greeting</code> prefix and the <code>other</code>
prefix:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@ConfigProperties(prefix = "greeting")
public class GreetingConfiguration {

    @Size(min = 20)
    public String message;
    public String suffix = "!";

}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@ApplicationScoped
public class SomeBean {

    @Inject <i class="conum" data-value="1"></i><b>(1)</b>
    GreetingConfiguration greetingConfiguration;

    @ConfigPrefix("other") <i class="conum" data-value="2"></i><b>(2)</b>
    GreetingConfiguration otherConfiguration;

}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>この注入ポイントでは、<code>greetingConfiguration</code> は <code>@ConfigProperties</code> で定義されている <code>greeting</code>
の接頭辞を使用します。</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>この注入ポイントでは、<code>otherConfiguration</code> は、<code>greeting</code> の接頭辞の代わりに <code>@ConfigPrefix</code> から
<code>other</code> の接頭辞を使用します。この場合、<code>@Inject</code> は必須ではないことに注意してください。</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="configpropertiesとビルド時条件の組み合わせ"><a class="anchor" href="#configpropertiesとビルド時条件の組み合わせ"></a>2.3. ConfigPropertiesとビルド時条件の組み合わせ</h3>
<div class="paragraph">
<p>Quarkusでは、ビルド時に評価される条件（ <code>@IfBuildProfile</code> 、 <code>@UnlessBuildProfile</code> 、
<code>@IfBuildProperty</code> 、 <code>@UnlessBuildProperty</code> ）を定義して、アノテーション
<code>@ConfigProperties</code> と <code>@ConfigPrefix</code>
を有効にしたり、無効にしたりすることができ、構成を非常に柔軟にマッピングすることができます。</p>
</div>
<div class="paragraph">
<p>サービスの設定が <code>@ConfigProperties</code>
にマッピングされていて、テストではこの設定部分はモックされるので必要ないとします。その場合は、次の例のようにビルド時の条件を定義します。</p>
</div>
<div class="paragraph">
<p><code>ServiceConfiguration.java</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@UnlessBuildProfile("test") <i class="conum" data-value="1"></i><b>(1)</b>
@ConfigProperties
public class ServiceConfiguration {
    public String user;
    public String password;
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>アノテーション <code>@ConfigProperties</code> は、アクティブなプロファイルが <code>test</code> でない場合にのみ考慮されます。</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><code>SomeBean.java</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@ApplicationScoped
public class SomeBean {

    @Inject
    Instance&lt;ServiceConfiguration&gt; serviceConfiguration; <i class="conum" data-value="1"></i><b>(1)</b>

}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>サービス設定が欠落している可能性があるため、インジェクションポイントで <code>Instance&lt;ServiceConfiguration&gt;</code>
を型として使用する必要があります。</td>
</tr>
</table>
</div>
</div>
</div>
</div>
    </div>
  </div>
</div>

  </div>

  <div class="content project-footer">
  <div class="footer-section">
    <div class="logo-wrapper">
      <a href="/"><img src="/assets/images/quarkus_logo_horizontal_rgb_reverse.svg" class="project-logo" title="Quarkus"></a>
    </div>
  </div>
  <div class="grid-wrapper">
    <p class="grid__item width-3-12">Quarkus はオープンです。このプロジェクトの全ての依存関係は<a href='https://www.apache.org/licenses/LICENSE-2.0' target='_blank'>Apache Software License 2.0</a>または互換性のあるライセンスの元で利用出来ます。<br /><br />このウェブサイトは <a href='https://jekyllrb.com/' target='_blank'>Jekyll</a> で構築されており、<a href='https://pages.github.com/' target='_blank'>Github Pages</a>にホストされており、完全にオープンソースです。改善したい場合、 <a href='https://github.com/quarkusio/quarkusio.github.io' target='_blank'>ウェブサイトをフォークし</a>、修正してみせてください。</p>

    
      <div class="width-1-12 project-links">
        <span>ナビゲーション</span>
        <ul class="footer-links">
          
            <li><a href="/">ホーム</a></li>
          
            <li><a href="/guides">ガイド</a></li>
          
            <li><a href="/community/#contributing">貢献</a></li>
          
            <li><a href="/faq">FAQ</a></li>
          
            <li><a href="/get-started">はじめに</a></li>
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <span>貢献</span>
        <ul class="footer-links">
          
            <li><a href="https://twitter.com/quarkusio">フォロー</a></li>
          
            <li><a href="https://github.com/quarkusio">GitHub</a></li>
          
            <li><a href="/security">セキュリティポリシー</a></li>
          
        </ul>
      </div>
    
      <div class="width-2-12 project-links">
        <span>サポート</span>
        <ul class="footer-links">
          
            <li><a href="https://stackoverflow.com/questions/tagged/quarkus">Stack Overflow</a></li>
          
            <li><a href="https://quarkusio.zulipchat.com">チャットルーム</a></li>
          
            <li><a href="https://groups.google.com/forum/#!forum/quarkus-dev">フォーラム</a></li>
          
        </ul>
      </div>
    

    
      <div class="width-4-12 more-links">
        <span>Quarkusはコミュニティプロジェクトで構成されています：</span>
        <ul class="footer-links">
          
            <li><a href="https://vertx.io/" target="_blank">Eclipse Vert.x</a></li>
          
            <li><a href="https://smallrye.io" target="_blank">SmallRye</a></li>
          
            <li><a href="https://hibernate.org" target="_blank">Hibernate</a></li>
          
            <li><a href="https://netty.io" target="_blank">Netty</a></li>
          
            <li><a href="https://resteasy.github.io" target="_blank">RESTEasy</a></li>
          
            <li><a href="https://camel.apache.org" target="_blank">Apache Camel</a></li>
          
            <li><a href="https://microprofile.io" target="_blank">Eclipse MicroProfile</a></li>
          
            <li><a href="https://code.quarkus.io/" target="_blank">等々...</a></li>
          
        </ul>
      </div>
    
  </div>
</div>

  <div class="content redhat-footer">
  <div class="grid-wrapper">
    <span class="licence">
      <i class="fab fa-creative-commons"></i><i class="fab fa-creative-commons-by"></i> <a href="https://creativecommons.org/licenses/by/3.0/" target="_blank">CC by 3.0</a> | <a href="https://www.redhat.com/en/about/privacy-policy">Privacy Policy</a>
    </span>
    <span class="redhat">
      Sponsored by
    </span>
    <span class="redhat-logo">
      <a href="https://www.redhat.com/" target="_blank"><img src="/assets/images/redhat_reversed.svg"></a>
    </span>
  </div>
</div>


  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js" integrity="sha384-8gBf6Y4YYq7Jx97PIqmTwLPin4hxIzQw5aDmUg/DDhul9fFpbbLcLh3nTIIDJKhx" crossorigin="anonymous"></script>
  <script type="text/javascript" src="/assets/javascript/mobile-nav.js"></script>
  <script type="text/javascript" src="/assets/javascript/scroll-down.js"></script>
  <script src="/assets/javascript/satellite.js" type="text/javascript"></script>
  <script src="/guides/javascript/config.js" type="text/javascript"></script>
  <script src="/assets/javascript/search-filter.js" type="text/javascript"></script>
  <script src="/assets/javascript/guides-version-dropdown.js" type="text/javascript"></script>
  <script src="/assets/javascript/back-to-top.js" type="text/javascript"></script>
</body>

</html>
